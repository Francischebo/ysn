<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YSN Admin Dashboard</title>
    <style>
         :root {
            --primary: #ff7700;
            --secondary: #1e3a8a;
            --accent: #10b981;
            --light: #f8fafc;
            --dark: #0f172a;
            --danger: #ef4444;
            --success: #22c55e;
            --warning: #f59e0b;
            --info: #3b82f6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        
        body {
            background-color: #f1f5f9;
            color: #334155;
            line-height: 1.6;
        }
        
        a {
            text-decoration: none;
            color: inherit;
        }
        
        .container {
            display: flex;
            min-height: 100vh;
        }
        /* Sidebar */
        
        .sidebar {
            width: 250px;
            background-color: var(--dark);
            color: white;
            padding: 1.5rem 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }
        
        .sidebar-header {
            padding: 0 1.5rem 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .sidebar-header img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }
        
        .sidebar-header h2 {
            font-size: 1.25rem;
            font-weight: 600;
        }
        
        .sidebar-menu {
            padding: 1.5rem 0;
        }
        
        .sidebar-menu h3 {
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: rgba(255, 255, 255, 0.6);
            padding: 0 1.5rem;
            margin-bottom: 0.75rem;
        }
        
        .sidebar-menu ul {
            list-style: none;
        }
        
        .sidebar-menu li {
            margin-bottom: 0.25rem;
        }
        
        .sidebar-menu a {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.5rem;
            transition: background-color 0.3s ease;
        }
        
        .sidebar-menu a:hover,
        .sidebar-menu a.active {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .sidebar-menu a.active {
            border-left: 3px solid var(--primary);
        }
        
        .sidebar-menu .icon {
            font-size: 1.25rem;
            width: 20px;
            text-align: center;
        }
        /* Main Content */
        
        .main-content {
            flex: 1;
            padding: 1.5rem;
            margin-left: 250px;
        }
        
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .top-bar h1 {
            font-size: 1.75rem;
            color: var(--dark);
        }
        
        .user-menu {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .user-menu img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }
        
        .user-info {
            text-align: right;
        }
        
        .user-info h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--dark);
        }
        
        .user-info p {
            font-size: 0.875rem;
            color: #64748b;
        }
        /* Dashboard Cards */
        
        .stat-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .stat-card h2 {
            font-size: 1.75rem;
            color: var(--dark);
            margin-bottom: 0.25rem;
        }
        
        .stat-card p {
            font-size: 0.875rem;
            color: #64748b;
        }
        
        .stat-card .status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1rem;
            font-size: 0.875rem;
        }
        
        .stat-card .status.up {
            color: var(--success);
        }
        
        .stat-card .status.down {
            color: var(--danger);
        }
        /* Content Tabs */
        
        .content-tabs {
            margin-bottom: 1.5rem;
        }
        
        .tab-buttons {
            display: flex;
            gap: 1rem;
            border-bottom: 1px solid #e2e8f0;
            margin-bottom: 1.5rem;
        }
        
        .tab-btn {
            padding: 0.75rem 1.5rem;
            background: none;
            border: none;
            font-size: 1rem;
            font-weight: 500;
            color: #64748b;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tab-btn:hover {
            color: var(--dark);
        }
        
        .tab-btn.active {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        /* Content Panels */
        
        .panel {
            background-color: white;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }
        
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .panel-header h2 {
            font-size: 1.25rem;
            color: var(--dark);
        }
        
        .panel-body {
            margin-bottom: 1.5rem;
        }
        /* Forms */
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--dark);
            margin-bottom: 0.5rem;
        }
        
        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.375rem;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .form-control:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }
        
        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }
        /* Buttons */
        
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease;
            border: none;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #e05f00;
        }
        
        .btn-secondary {
            background-color: white;
            color: var(--dark);
            border: 1px solid #e2e8f0;
        }
        
        .btn-secondary:hover {
            background-color: #f8fafc;
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #dc2626;
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background-color: #16a34a;
        }
        /* Tables */
        
        .table-container {
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th,
        td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }
        
        th {
            font-weight: 600;
            color: var(--dark);
            background-color: #f8fafc;
        }
        
        tr:hover td {
            background-color: #f8fafc;
        }
        
        .table-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .action-btn {
            background: none;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            color: #64748b;
            transition: color 0.3s ease;
        }
        
        .action-btn:hover {
            color: var(--primary);
        }
        
        .action-btn.edit:hover {
            color: var(--info);
        }
        
        .action-btn.delete:hover {
            color: var(--danger);
        }
        /* File Upload */
        
        .file-upload {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .file-upload label {
            cursor: pointer;
            background-color: #f8fafc;
            border: 1px dashed #cbd5e1;
            border-radius: 0.375rem;
            padding: 1.5rem;
            text-align: center;
            flex-grow: 1;
            transition: border-color 0.3s ease;
        }
        
        .file-upload label:hover {
            border-color: var(--primary);
        }
        
        .file-upload input[type="file"] {
            display: none;
        }
        
        .file-upload-icon {
            font-size: 2rem;
            color: #64748b;
            margin-bottom: 0.5rem;
        }
        
        .file-preview {
            max-width: 120px;
            max-height: 120px;
            object-fit: cover;
            border-radius: 0.375rem;
        }
        /* Modal */
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            display: none;
        }
        
        .modal {
            background-color: white;
            border-radius: 0.5rem;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .modal-header h2 {
            font-size: 1.25rem;
            color: var(--dark);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #64748b;
            transition: color 0.3s ease;
        }
        
        .modal-close:hover {
            color: var(--danger);
        }
        
        .modal-body {
            padding: 1.5rem;
        }
        
        .modal-footer {
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            border-top: 1px solid #e2e8f0;
        }
        /* Responsive */
        
        @media (max-width: 1024px) {
            .stat-cards {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .sidebar {
                width: 80px;
                padding: 1rem 0;
            }
            .sidebar-header {
                justify-content: center;
                padding: 0 0 1rem;
            }
            .sidebar-header h2 {
                display: none;
            }
            .sidebar-menu h3 {
                text-align: center;
                padding: 0;
            }
            .sidebar-menu a {
                justify-content: center;
                padding: 0.75rem;
            }
            .sidebar-menu span {
                display: none;
            }
            .main-content {
                margin-left: 80px;
            }
        }
        
        @media (max-width: 640px) {
            .stat-cards {
                grid-template-columns: 1fr;
            }
            .table-responsive {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
            .tab-buttons {
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: 0.5rem;
            }
            .form-actions {
                flex-direction: column;
            }
            .form-actions .btn {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="/api/placeholder/50/50" alt="YSN Logo">
                <h2>YSN Admin</h2>
            </div>

            <div class="sidebar-menu">
                <h3>Main</h3>
                <ul>
                    <li><a href="#" class="active"><span class="icon">📊</span><span>Dashboard</span></a></li>
                    <li><a href="#"><span class="icon">📰</span><span>Content</span></a></li>
                    <li><a href="#"><span class="icon">📅</span><span>Events</span></a></li>
                    <li><a href="#"><span class="icon">👥</span><span>Members</span></a></li>
                </ul>

                <h3>Management</h3>
                <ul>
                    <li><a href="#"><span class="icon">📝</span><span>Programs</span></a></li>
                    <li><a href="#"><span class="icon">🏫</span><span>Chapters</span></a></li>
                    <li><a href="#"><span class="icon">💬</span><span>Testimonials</span></a></li>
                    <li><a href="#"><span class="icon">📸</span><span>Media</span></a></li>
                </ul>

                <h3>Settings</h3>
                <ul>
                    <li><a href="#"><span class="icon">👤</span><span>Users</span></a></li>
                    <li><a href="#"><span class="icon">⚙️</span><span>Settings</span></a></li>
                    <li><a href="#"><span class="icon">🔒</span><span>Logout</span></a></li>
                </ul>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="top-bar">
                <h1>Dashboard</h1>

                <div class="user-menu">
                    <div class="user-info">
                        <h3>Admin User</h3>
                        <p>Administrator</p>
                    </div>
                    <img src="/api/placeholder/50/50" alt="User Profile">
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="stat-cards">
                <div class="stat-card">
                    <h2>6</h2>
                    <p>University Chapters</p>
                    <div class="status up">
                        <span>↑</span> Increased by 2 this year
                    </div>
                </div>

                <div class="stat-card">
                    <h2>3</h2>
                    <p>Upcoming Events</p>
                    <div class="status up">
                        <span>↑</span> 1 new event added
                    </div>
                </div>

                <div class="stat-card">
                    <h2>245</h2>
                    <p>Active Members</p>
                    <div class="status up">
                        <span>↑</span> Growth of 15% since Jan
                    </div>
                </div>

                <div class="stat-card">
                    <h2>35</h2>
                    <p>Testimonials</p>
                    <div class="status up">
                        <span>↑</span> 8 new this month
                    </div>
                </div>
            </div>

            <!-- Messages Section -->
            <div class="panel">
                <div class="panel-header">
                    <h2>Messages from Users</h2>
                </div>
                <div class="panel-body">
                    <div class="table-container">
                        <ul id="admin-message-list" style="list-style: none; padding: 0;">
                            <!-- Messages will be injected here -->
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Content Management Tabs -->

            <div class="content-tabs">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-tab="programs">Programs</button>
                    <button class="tab-btn" data-tab="events">Events</button>
                    <button class="tab-btn" data-tab="testimonials">Testimonials</button>
                    <button class="tab-btn" data-tab="chapters">Chapters</button>
                    <button class="tab-btn" data-tab="summits">Summit Highlights</button>
                    <button class="tab-btn" data-tab="donations-table-body">Donation</button>
                    <button class="tab-btn" data-tab="join-us">Join Us</button>
                    <!-- NEW TAB -->
                </div>


                <!-- Programs Tab -->
                <div class="tab-content active" id="programs-tab">
                    <div class="panel">
                        <div class="panel-header">
                            <h2>Manage Programs</h2>
                            <button class="btn btn-primary" id="add-program-btn">Add New Program</button>
                        </div>

                        <div class="panel-body">
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Program Name</th>
                                            <th>Category</th>
                                            <th>Status</th>
                                            <th>Last Updated</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>Youth Leadership Academy</td>
                                            <td>Leadership</td>
                                            <td>Active</td>
                                            <td>Apr 15, 2025</td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="action-btn edit">✏️</button>
                                                    <button class="action-btn delete">🗑️</button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>Legal Empowerment</td>
                                            <td>Education</td>
                                            <td>Active</td>
                                            <td>Apr 10, 2025</td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="action-btn edit">✏️</button>
                                                    <button class="action-btn delete">🗑️</button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>3</td>
                                            <td>Community Service Projects</td>
                                            <td>Community</td>
                                            <td>Active</td>
                                            <td>Apr 5, 2025</td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="action-btn edit">✏️</button>
                                                    <button class="action-btn delete">🗑️</button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Events Tab -->
                <div class="tab-content" id="events-tab">
                    <div class="panel">
                        <div class="panel-header">
                            <h2>Manage Events</h2>
                            <button class="btn btn-primary" id="add-event-btn">Add New Event</button>
                        </div>

                        <div class="panel-body">
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Event Name</th>
                                            <th>Date</th>
                                            <th>Location</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>Youth Leadership Summit 2025</td>
                                            <td>May 15, 2025</td>
                                            <td>Nairobi, Kenya</td>
                                            <td>Upcoming</td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="action-btn edit">✏️</button>
                                                    <button class="action-btn delete">🗑️</button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>Legal Awareness Workshop</td>
                                            <td>Jun 5, 2025</td>
                                            <td>Kabarak University</td>
                                            <td>Upcoming</td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="action-btn edit">✏️</button>
                                                    <button class="action-btn delete">🗑️</button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>3</td>
                                            <td>Community Service Day</td>
                                            <td>Jun 20, 2025</td>
                                            <td>Multiple Locations</td>
                                            <td>Upcoming</td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="action-btn edit">✏️</button>
                                                    <button class="action-btn delete">🗑️</button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Testimonials Tab -->
                <div class="tab-content" id="testimonials-tab">
                    <div class="panel">
                        <div class="panel-header">
                            <h2>Manage Testimonials</h2>
                            <button class="btn btn-primary" id="add-testimonial-btn">Add New Testimonial</button>
                        </div>

                        <div class="panel-body">
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Name</th>
                                            <th>Position</th>
                                            <th>Date Added</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>Griffins Gero</td>
                                            <td>Law Student, University of Nairobi</td>
                                            <td>Mar 10, 2025</td>
                                            <td>Published</td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="action-btn edit">✏️</button>
                                                    <button class="action-btn delete">🗑️</button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>Faith Kimani</td>
                                            <td>Environmental Advocate</td>
                                            <td>Mar 15, 2025</td>
                                            <td>Published</td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="action-btn edit">✏️</button>
                                                    <button class="action-btn delete">🗑️</button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>3</td>
                                            <td>Sarah Odhiambo</td>
                                            <td>Law Graduate, Kenyatta University</td>
                                            <td>Mar 20, 2025</td>
                                            <td>Published</td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="action-btn edit">✏️</button>
                                                    <button class="action-btn delete">🗑️</button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chapters Tab -->
                <div class="tab-content" id="chapters-tab">
                    <div class="panel">
                        <div class="panel-header">
                            <h2>Manage University Chapters</h2>
                            <button class="btn btn-primary" id="add-chapter-btn">Add New Chapter</button>
                        </div>

                        <div class="panel-body">
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>University Name</th>
                                            <th>Location</th>
                                            <th>Established</th>
                                            <th>Members</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="admin-chapter-table">
                                        <tr>
                                            <td>1</td>
                                            <td>Kabarak University</td>
                                            <td>Nakuru</td>
                                            <td>2020</td>
                                            <td>45</td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="action-btn edit">✏️</button>
                                                    <button class="action-btn delete">🗑️</button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>University of Nairobi</td>
                                            <td>Nairobi</td>
                                            <td>2021</td>
                                            <td>78</td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="action-btn edit">✏️</button>
                                                    <button class="action-btn delete">🗑️</button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>3</td>
                                            <td>Kenyatta University</td>
                                            <td>Nairobi</td>
                                            <td>2021</td>
                                            <td>62</td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="action-btn edit">✏️</button>
                                                    <button class="action-btn delete">🗑️</button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>4</td>
                                            <td>Strathmore University</td>
                                            <td>Nairobi</td>
                                            <td>2022</td>
                                            <td>35</td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="action-btn edit">✏️</button>
                                                    <button class="action-btn delete">🗑️</button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>5</td>
                                            <td>Moi University</td>
                                            <td>Eldoret</td>
                                            <td>2023</td>
                                            <td>40</td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="action-btn edit">✏️</button>
                                                    <button class="action-btn delete">🗑️</button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>6</td>
                                            <td>Egerton University</td>
                                            <td>Njoro</td>
                                            <td>2023</td>
                                            <td>25</td>
                                            <td>
                                                <div class="table-actions">
                                                    <button class="action-btn edit">✏️</button>
                                                    <button class="action-btn delete">🗑️</button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity Panel -->
            <div class="panel">
                <div class="panel-header">
                    <h2>Recent Activity</h2>
                </div>

                <div class="panel-body">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Action</th>
                                    <th>Item</th>
                                    <th>Time</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Admin User</td>
                                    <td>Created new event</td>
                                    <td>Community Service Day</td>
                                    <td>Today, 10:23 AM</td>
                                </tr>
                                <tr>
                                    <td>Jane Doe</td>
                                    <td>Updated chapter</td>
                                    <td>Strathmore University</td>
                                    <td>Yesterday, 3:45 PM</td>
                                </tr>
                                <tr>
                                    <td>John Smith</td>
                                    <td>Added testimonial</td>
                                    <td>Faith Kimani</td>
                                    <td>Apr 28, 2025, 1:30 PM</td>
                                </tr>
                                <tr>
                                    <td>Admin User</td>
                                    <td>Updated program</td>
                                    <td>Youth Leadership Academy</td>
                                    <td>Apr 28, 2025, 11:15 AM</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Summit Highlights Tab -->
            <div class="tab-content" id="summits-tab">
                <div class="panel">
                    <div class="panel-header">
                        <h2>Manage Summit Highlights</h2>
                        <button class="btn btn-primary" id="add-summit-btn">Add New Summit</button>
                    </div>
                    <div class="panel-body">
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Title</th>
                                        <th>Year</th>
                                        <th>Date</th>
                                        <th>Location</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="summit-table-body">
                                    <!-- Summit Rows will be injected here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>Phone</th>
                        <th>Amount</th>
                        <th>Txn ID</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody id="donations-table-body"></tbody>
            </table>

            <!-- Join Us Tab -->
            <div class="tab-content" id="join-us-tab">
                <div class="panel">
                    <div class="panel-header">
                        <h2>New Join Requests</h2>
                    </div>
                    <div class="panel-body">
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Phone</th>
                                        <th>University</th>
                                        <th>Location</th>
                                        <th>Role</th>
                                        <th>Date Applied</th>
                                    </tr>
                                </thead>
                                <tbody id="applicants-table-body">
                                    <!-- Dynamic Rows Go Here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Add Program Modal -->
            <div class="modal-overlay" id="add-program-modal">
                <div class="modal">
                    <div class="modal-header">
                        <h2>Add New Program</h2>
                        <button class="modal-close">&times;</button>
                    </div>

                    <div class="modal-body">
                        <form id="program-form">
                            <div class="form-group">
                                <label for="program-name">Program Name</label>
                                <input type="text" id="program-name" class="form-control" required>
                            </div>

                            <div class="form-group">
                                <label for="program-category">Category</label>
                                <select id="program-category" class="form-control">
                                <option value="">Select Category</option>
                                <option value="leadership">Leadership</option>
                                <option value="education">Education</option>
                                <option value="community">Community</option>
                                <option value="legal">Legal</option>
                            </select>
                            </div>

                            <div class="form-group">
                                <label for="program-desc">Description</label>
                                <textarea id="program-desc" class="form-control" required></textarea>
                            </div>

                            <div class="form-group">
                                <label for="program-status">Status</label>
                                <select id="program-status" class="form-control">
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                                <option value="draft">Draft</option>
                            </select>
                            </div>

                            <div class="form-group">
                                <label>Program Image</label>
                                <div class="file-upload">
                                    <label for="program-image">
                                    <div class="file-upload-icon">📁</div>
                                    <p>Click to upload image</p>
                                </label>
                                    <input type="file" id="program-image" accept="image/*">
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="modal-footer">
                        <button class="btn btn-secondary modal-close">Cancel</button>
                        <button class="btn btn-primary" id="save-program">Save Program</button>
                    </div>
                </div>
            </div>

            <!-- Add Event Modal -->
            <div class="modal-overlay" id="add-event-modal">
                <div class="modal">
                    <div class="modal-header">
                        <h2>Add New Event</h2>
                        <button class="modal-close">&times;</button>
                    </div>

                    <div class="modal-body">
                        <form id="event-form">
                            <div class="form-group">
                                <label for="event-name">Event Name</label>
                                <input type="text" id="event-name" class="form-control" required>
                            </div>

                            <div class="form-group">
                                <label for="event-date">Date</label>
                                <input type="date" id="event-date" class="form-control" required>
                            </div>

                            <div class="form-group">
                                <label for="event-location">Location</label>
                                <input type="text" id="event-location" class="form-control" required>
                            </div>

                            <div class="form-group">
                                <label for="event-desc">Description</label>
                                <textarea id="event-desc" class="form-control" required></textarea>
                            </div>

                            <div class="form-group">
                                <label for="event-status">Status</label>
                                <select id="event-status" class="form-control">
                                <option value="upcoming">Upcoming</option>
                                <option value="ongoing">Ongoing</option>
                                <option value="completed">Completed</option>
                                <option value="cancelled">Cancelled</option>
                            </select>
                            </div>

                            <div class="form-group">
                                <label>Event Image</label>
                                <div class="file-upload">
                                    <label for="event-image">
                                    <div class="file-upload-icon">📁</div>
                                    <p>Click to upload image</p>
                                </label>
                                    <input type="file" id="event-image" accept="image/*">
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="modal-footer">
                        <button class="btn btn-secondary modal-close">Cancel</button>
                        <button class="btn btn-primary" id="save-event">Save Event</button>
                    </div>
                </div>
            </div>

            <!-- Add Testimonial Modal -->
            <div class="modal-overlay" id="add-testimonial-modal">
                <div class="modal">
                    <div class="modal-header">
                        <h2>Add New Testimonial</h2>
                        <button class="modal-close">&times;</button>
                    </div>

                    <div class="modal-body">
                        <form id="testimonial-form">
                            <div class="form-group">
                                <label for="testimonial-name">Name</label>
                                <input type="text" id="testimonial-name" class="form-control" required>
                            </div>

                            <div class="form-group">
                                <label for="testimonial-position">Position</label>
                                <input type="text" id="testimonial-position" class="form-control" required>
                            </div>

                            <div class="form-group">
                                <label for="testimonial-text">Testimonial</label>
                                <textarea id="testimonial-text" class="form-control" required></textarea>
                            </div>

                            <div class="form-group">
                                <label for="testimonial-status">Status</label>
                                <select id="testimonial-status" class="form-control">
                                <option value="published">Published</option>
                                <option value="draft">Draft</option>
                            </select>
                            </div>

                            <div class="form-group">
                                <label>Profile Image</label>
                                <div class="file-upload">
                                    <label for="testimonial-image">
                                    <div class="file-upload-icon">📁</div>
                                    <p>Click to upload image</p>
                                </label>
                                    <input type="file" id="testimonial-image" accept="image/*">
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="modal-footer">
                        <button class="btn btn-secondary modal-close">Cancel</button>
                        <button class="btn btn-primary" id="save-testimonial">Save Testimonial</button>
                    </div>
                </div>
            </div>

            <!-- Add Chapter Modal -->
            <div class="modal-overlay" id="add-chapter-modal">
                <div class="modal">
                    <div class="modal-header">
                        <h2>Add New Chapter</h2>
                        <button class="modal-close">&times;</button>
                    </div>

                    <div class="modal-body">
                        <form id="chapter-form">
                            <div class="form-group">
                                <label for="chapter-name">University Name</label>
                                <input type="text" id="chapter-name" class="form-control" required>
                            </div>

                            <div class="form-group">
                                <label for="chapter-location">Location</label>
                                <input type="text" id="chapter-location" class="form-control" required>
                            </div>

                            <div class="form-group">
                                <label for="chapter-established">Year Established</label>
                                <input type="number" id="chapter-established" class="form-control" min="2000" max="2025" required>
                            </div>

                            <div class="form-group">
                                <label for="chapter-members">Number of Members</label>
                                <input type="number" id="chapter-members" class="form-control" min="0" required>
                            </div>

                            <div class="form-group">
                                <label for="chapter-desc">Description</label>
                                <textarea id="chapter-desc" class="form-control" required></textarea>
                            </div>

                            <div class="form-group">
                                <label>Chapter Logo</label>
                                <div class="file-upload">
                                    <label for="chapter-logo">
                                    <div class="file-upload-icon">📁</div>
                                    <p>Click to upload logo</p>
                                </label>
                                    <input type="file" id="chapter-logo" accept="image/*">
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="modal-footer">
                        <button class="action-btn edit" onclick="editChapter('${chapter._id}')">✏️</button>
                        <button class="btn btn-secondary modal-close">Cancel</button>
                        <button class="btn btn-primary" id="save-chapter">Save Chapter</button>
                    </div>
                </div>
            </div>

            <!-- Add Summit Modal -->
            <div class="modal-overlay" id="add-summit-modal">
                <div class="modal">
                    <div class="modal-header">
                        <h2>Add New Summit Highlight</h2>
                        <button class="modal-close">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form id="summit-form">
                            <div class="form-group">
                                <label for="summit-title">Title</label>
                                <input type="text" id="summit-title" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="summit-year">Year</label>
                                <input type="number" id="summit-year" class="form-control" min="2000" max="2099" required>
                            </div>
                            <div class="form-group">
                                <label for="summit-date">Date</label>
                                <input type="text" id="summit-date" class="form-control" placeholder="e.g., May 10 - 12, 2025" required>
                            </div>
                            <div class="form-group">
                                <label for="summit-location">Location</label>
                                <input type="text" id="summit-location" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="summit-description">Description</label>
                                <textarea id="summit-description" class="form-control" required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="summit-image">Image URL</label>
                                <input type="url" id="summit-image" class="form-control" placeholder="https://example.com/image.jpg" required>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary modal-close">Cancel</button>
                        <button class="btn btn-primary" id="save-summit">Save Summit</button>
                    </div>
                </div>
            </div>

            <!-- Reply Modal -->
            <div class="modal-overlay" id="reply-modal">
                <div class="modal" style="max-width: 600px;">
                    <div class="modal-header">
                        <h2>Reply to User</h2>
                        <button class="modal-close">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form id="reply-form">
                            <div class="form-group">
                                <label for="reply-to">To:</label>
                                <input type="text" id="reply-to" class="form-control" disabled>
                            </div>
                            <div class="form-group">
                                <label for="reply-text">Your Response</label>
                                <textarea id="reply-text" class="form-control" required></textarea>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary modal-close">Cancel</button>
                        <button class="btn btn-primary" id="send-reply-btn">Send Reply</button>
                    </div>
                </div>
            </div>
            <!-- JavaScript for interactivity -->

            <script src="/socket.io/socket.io.js"></script>
            <script>
                const socket = io(); // Connect to backend
                let currentEmail = "";

                // Ensure DOM Elements Exist
                window.openChat = function(email) {
                    const replyToField = document.getElementById("reply-to");
                    if (replyToField) {
                        replyToField.value = email;
                        openModal("reply-modal");
                        currentEmail = email;
                    }
                };

                // Load messages from API
                async function loadMessages() {
                    try {
                        const response = await fetch("/api/messages");
                        const messages = await response.json();

                        const list = document.getElementById("admin-message-list");
                        if (!list) return;

                        list.innerHTML = ""; // Clear previous

                        if (!messages.length) {
                            list.innerHTML = "<li>No messages yet.</li>";
                            return;
                        }

                        messages.forEach(msg => {
                            const item = document.createElement("li");
                            item.style.marginBottom = "1rem";
                            item.innerHTML = `
                                <strong>${msg.name}</strong> (${msg.email})<br>
                                <em>"${msg.text}"</em><br>
                                <small>${new Date(msg.timestamp).toLocaleString()}</small><br>
                                <button class="btn btn-primary start-chat-btn" onclick="openChat('${msg.email}')">Start Chat</button>
                            `;
                            list.appendChild(item);
                        });
                    } catch (err) {
                        console.error("Failed to load messages:", err);
                    }
                }

                // Handle incoming message from user
                socket.on("new_message", (data) => {
                    const list = document.getElementById("admin-message-list");
                    if (!list) return;

                    const item = document.createElement("li");
                    item.style.marginBottom = "1rem";
                    item.innerHTML = `
                        <strong>${data.name}</strong> (${data.email})<br>
                        <em>"${data.text}"</em><br>
                        <small>${new Date(data.timestamp).toLocaleString()}</small><br>
                        <button class="btn btn-primary start-chat-btn" onclick="openChat('${data.email}')">Start Chat</button>
                    `;
                    list.prepend(item); // Show latest first
                });

                // Send reply back to user
                document.getElementById("send-reply-btn")?.addEventListener("click", () => {
                    const response = document.getElementById("reply-text").value.trim();
                    if (!response || !currentEmail) {
                        alert("Please enter a reply and select a user.");
                        return;
                    }

                    socket.emit("coordinator_reply", {
                        to: currentEmail,
                        text: response
                    });

                    alert("Reply sent!");
                    closeModals();
                    document.getElementById("reply-text").value = "";
                });

                // Call loadMessages when switching to chapters tab
                document.addEventListener("DOMContentLoaded", function () {
                    const tabButtons = document.querySelectorAll('.tab-btn');
                    const tabContents = document.querySelectorAll('.tab-content');

                    tabButtons.forEach(button => {
                        button.addEventListener('click', () => {
                            tabButtons.forEach(btn => btn.classList.remove('active'));
                            tabContents.forEach(content => content.classList.remove('active'));

                            button.classList.add('active');
                            const tabId = button.getAttribute('data-tab');
                            document.getElementById(`${tabId}-tab`).classList.add('active');

                            if (tabId === 'chapters') {
                                loadMessages(); // Load messages when viewing chapters tab
                            }
                        });
                    });

                    // Modal Functions
                    function openModal(modalId) {
                        const modal = document.getElementById(modalId);
                        if (modal) modal.style.display = "flex";
                    }

                    function closeModals() {
                        document.querySelectorAll('.modal-overlay').forEach(modal => {
                            modal.style.display = "none";
                        });
                    }

                    // Close modals on click outside
                    document.querySelectorAll(".modal-overlay").forEach(overlay => {
                        overlay.addEventListener("click", function(e) {
                            if (e.target === overlay) closeModals();
                        });
                    });

                    // File Upload Preview
                    document.querySelectorAll('input[type="file"]').forEach(input => {
                        input.addEventListener('change', function () {
                            if (this.files && this.files[0]) {
                                const fileUpload = this.parentElement;
                                let preview = fileUpload.querySelector('.file-preview');
                                if (!preview) {
                                    preview = document.createElement('img');
                                    preview.className = 'file-preview';
                                    fileUpload.appendChild(preview);
                                }
                                const reader = new FileReader();
                                reader.onload = e => preview.src = e.target.result;
                                reader.readAsDataURL(this.files[0]);
                            }
                        });
                    });
                });
            </script>

            <script>
                // Tab Switching
                const tabButtons = document.querySelectorAll('.tab-btn');
                const tabContents = document.querySelectorAll('.tab-content');

                tabButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        tabButtons.forEach(btn => btn.classList.remove('active'));
                        tabContents.forEach(content => content.classList.remove('active'));
                    
                        button.classList.add('active');
                        const tabId = button.getAttribute('data-tab');
                        const targetTab = document.getElementById(`${tabId}-tab`);
                        targetTab.classList.add('active');
                        document.getElementById(`${tabId}-tab`).classList.add('active');

                        // Run special loading functions per tab
                        if (tabId === 'chapters') {
                            loadChapters(); // Fetch and render chapters
                        }
                    
                        // Run special loading functions per tab
                        if (tabId === 'summits') {
                            loadSummits(); // Load summit data
                        }
                    });
                });

                document.getElementById("add-chapter-btn").addEventListener("click", () => {
                    openModal('add-chapter-modal');
                    prefillChapterForm(); // optional
                });

                function openModal(modalId) {
                    document.getElementById(modalId).style.display = 'flex';
                }


                async function prefillChapterForm(chapterId = null) {
                    const nameInput = document.getElementById("chapter-name");
                    const locationInput = document.getElementById("chapter-location");
                    const establishedInput = document.getElementById("chapter-established");
                    const membersInput = document.getElementById("chapter-members");
                    const descInput = document.getElementById("chapter-desc");
                
                    // Clear inputs first
                    nameInput.value = "";
                    locationInput.value = "";
                    establishedInput.value = "";
                    membersInput.value = "";
                    descInput.value = "";
                
                    // If chapterId is provided, fetch data from API
                    if (chapterId) {
                        try {
                            const response = await fetch(`/api/chapters/${chapterId}`);
                            const chapter = await response.json();
                
                            nameInput.value = chapter.name;
                            locationInput.value = chapter.location;
                            establishedInput.value = new Date(chapter.createdAt).getFullYear();
                            membersInput.value = chapter.membersCount || 0;
                            descInput.value = chapter.description || "";
                        } catch (err) {
                            console.error("Failed to load chapter data:", err);
                        }
                    }
                }

                document.getElementById("add-chapter-btn").addEventListener("click", () => {
                    prefillChapterForm(); // clear form or load default values
                    openModal('add-chapter-modal');
                });

                async function editChapter(id) {
                    try {
                        // Fetch chapter by ID from backend
                        const response = await fetch(`/api/chapters/${id}`);
                        const chapter = await response.json();
                
                        // Open modal
                        openModal('add-chapter-modal');
                
                        // Populate form fields
                        document.getElementById("chapter-name").value = chapter.name;
                        document.getElementById("chapter-location").value = chapter.location;
                        document.getElementById("chapter-established").value = new Date(chapter.createdAt).getFullYear();
                        document.getElementById("chapter-members").value = chapter.membersCount || 0;
                        document.getElementById("chapter-desc").value = chapter.description || "";
                        document.getElementById("chapter-id").value = chapter._id; // Hidden input to track ID
                    } catch (err) {
                        console.error("Failed to load chapter:", err);
                        alert("Could not load chapter data.");
                    }
                }

                document.getElementById('save-chapter').addEventListener('click', async function() {
                    const formData = {
                        name: document.getElementById('chapter-name').value.trim(),
                        location: document.getElementById('chapter-location').value.trim(),
                        establishedYear: parseInt(document.getElementById('chapter-established').value),
                        membersCount: parseInt(document.getElementById('chapter-members').value),
                        description: document.getElementById('chapter-desc').value.trim()
                    };
                
                    if (!formData.name || !formData.location || !formData.establishedYear) {
                        alert("Please fill out all required fields.");
                        return;
                    }
                
                    try {
                        const response = await fetch("/api/chapters", {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify(formData)
                        });
                
                        if (response.ok) {
                            closeModals();
                            loadChapters(); // Refresh the chapters list
                        } else {
                            alert("There was an error saving the chapter.");
                        }
                    } catch (err) {
                        console.error(err);
                        alert("Could not save chapter.");
                    }
                });

                // Close modals when clicking outside or on "Cancel"
                function closeModals() {
                    document.querySelectorAll('.modal-overlay').forEach(modal => {
                        modal.style.display = 'none';
                    });
                }

                document.querySelectorAll('.modal-close').forEach(button => {
                    button.addEventListener('click', closeModals);
                });

                document.querySelectorAll('.modal-overlay').forEach(overlay => {
                    overlay.addEventListener('click', function(e) {
                        if (e.target === overlay) {
                            closeModals();
                        }
                    });
                });

                async function loadChapters() {
                    try {
                        const response = await fetch("/api/chapters");
                        const chapters = await response.json();
                
                        const tbody = document.querySelector("#chapters-tab .table-container table tbody");
                        tbody.innerHTML = "";
                
                        if (!chapters.length) {
                            tbody.innerHTML = "<tr><td colspan='6' style='text-align:center'>No chapters found.</td></tr>";
                            return;
                        }
                
                        chapters.forEach(chapter => {
                            const row = document.createElement("tr");
                
                            row.innerHTML = `
                                <td>${chapter._id}</td>
                                <td>${chapter.name}</td>
                                <td>${chapter.location}</td>
                                <td>${new Date(chapter.createdAt).getFullYear()}</td>
                                <td>${chapter.membersCount || 0}</td>
                                <td>
                                    <div class="table-actions">
                                        <button class="action-btn edit" onclick="editChapter('${chapter._id}')">✏️</button>
                                        <button class="action-btn delete" onclick="deleteChapter('${chapter._id}')">🗑️</button>
                                    </div>
                                </td>
                            `;
                            tbody.appendChild(row);
                        });
                
                    } catch (err) {
                        console.error("Failed to load chapters:", err);
                    }
                }

                tabButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        tabButtons.forEach(btn => btn.classList.remove('active'));
                        tabContents.forEach(content => content.classList.remove('active'));
                
                        button.classList.add('active');
                        const tabId = button.getAttribute('data-tab');
                        document.getElementById(`${tabId}-tab`).classList.add('active');
                
                        // Run special loading logic for each tab
                        if (tabId === 'chapters') {
                            loadChapters(); // Load chapters when tab opens
                        }
                    });
                });


                function editChapter(id) {
                    alert("Edit chapter with ID: " + id);
                    // Later: Open modal & prefill form
                }

                async function deleteChapter(id) {
                    if (!confirm("Are you sure you want to delete this chapter?")) return;
                
                    try {
                        const response = await fetch(`/api/chapters/${id}`, {
                            method: "DELETE"
                        });
                
                        if (response.ok) {
                            alert("Chapter deleted successfully!");
                            loadChapters(); // Refresh list
                        } else {
                            alert("Failed to delete chapter.");
                        }
                    } catch (err) {
                        console.error(err);
                        alert("Could not connect to server.");
                    }
                }
                
                // File Upload Preview
                document.querySelectorAll('input[type="file"]').forEach(input => {
                    input.addEventListener('change', function() {
                        if (this.files && this.files[0]) {
                            const fileUpload = this.parentElement;

                            // Check if preview already exists
                            let preview = fileUpload.querySelector('.file-preview');
                            if (!preview) {
                                preview = document.createElement('img');
                                preview.className = 'file-preview';
                                fileUpload.appendChild(preview);
                            }

                            // Create file reader to display image
                            const reader = new FileReader();
                            reader.onload = function(e) {
                                preview.src = e.target.result;
                            };
                            reader.readAsDataURL(this.files[0]);
                        }
                    });
                });

                // Form Submissions
                document.getElementById('save-program').addEventListener('click', function() {
                    alert('Program saved successfully!');
                    closeModals();
                });

                document.getElementById('save-event').addEventListener('click', function() {
                    alert('Event saved successfully!');
                    closeModals();
                });

                document.getElementById('save-testimonial').addEventListener('click', function() {
                    alert('Testimonial saved successfully!');
                    closeModals();
                });

                document.getElementById('save-chapter').addEventListener('click', function() {
                    alert('Chapter saved successfully!');
                    closeModals();
                });

                // Load applicants into table
                async function loadApplicants() {
                    try {
                        const response = await fetch("/api/applicants");
                        const applicants = await response.json();
                        const tbody = document.getElementById("applicants-table-body");
                        tbody.innerHTML = "";

                        if (!applicants.length) {
                            tbody.innerHTML = "<tr><td colspan='8' style='text-align:center'>No new applications yet.</td></tr>";
                            return;
                        }

                        applicants.forEach(app => {
                            const row = document.createElement("tr");

                            row.innerHTML = `
                                <td>${app._id}</td>
                                <td>${app.fullName}</td>
                                <td>${app.email}</td>
                                <td>${app.phone}</td>
                                <td>${app.university || '-'}</td>
                                <td>${app.location}</td>
                                <td>${app.role}</td>
                                <td>${new Date(app.dateApplied).toLocaleDateString()}</td>
                            `;

                            tbody.appendChild(row);
                        });

                    } catch (err) {
                        console.error("Failed to load applicants:", err);
                    }
                }

                // Call it when the tab becomes active
                const joinTabButton = Array.from(document.querySelectorAll('.tab-btn')).find(btn => btn.getAttribute('data-tab') === 'join-us');
                joinTabButton.addEventListener('click', loadApplicants);


                // donation.

                document.addEventListener("DOMContentLoaded", () => {
                    loadDonations(); // Load on page load
                });

                async function loadDonations() {
                    try {
                        const response = await fetch("/transactions");
                        const donations = await response.json();
                        const tbody = document.querySelector("#donations-table-body");
                        tbody.innerHTML = "";
                
                        if (!donations.length) {
                            tbody.innerHTML = "<tr><td colspan='4' style='text-align:center'>No donations yet.</td></tr>";
                            return;
                        }
                
                        donations.forEach(donation => {
                            const row = document.createElement("tr");
                            row.innerHTML = `
                                <td>${donation.number}</td>
                                <td>KES ${donation.amount}</td>
                                <td>${donation.trnx_id}</td>
                                <td>${new Date(donation.createdAt).toLocaleString()}</td>
                            `;
                            tbody.appendChild(row);
                        });
                
                    } catch (err) {
                        console.error("Failed to load donations:", err);
                    }
                }

                // ====== MODAL: ADD NEW SUMMIT ======
                document.getElementById('add-summit-btn').addEventListener('click', () => {
                    openModal('add-summit-modal');
                });

                document.getElementById('save-summit').addEventListener('click', () => {
                    const formData = {
                        title: document.getElementById('summit-title').value.trim(),
                        year: parseInt(document.getElementById('summit-year').value),
                        date: document.getElementById('summit-date').value.trim(),
                        location: document.getElementById('summit-location').value.trim(),
                        description: document.getElementById('summit-description').value.trim(),
                        imageUrl: document.getElementById('summit-image').value.trim()
                    };

                    // Basic validation
                    if (!formData.title || !formData.year || !formData.date || !formData.location || !formData.description || !formData.imageUrl) {
                        alert("Please fill out all fields.");
                        return;
                    }

                    // Save via API or mock it for now
                    console.log("Saving summit:", formData);
                    alert("Summit saved successfully!");
                    closeModals();
                    clearSummitForm();
                    loadSummits(); // Optional: Load from DB later
                });

                function clearSummitForm() {
                    document.getElementById('summit-title').value = "";
                    document.getElementById('summit-year').value = "";
                    document.getElementById('summit-date').value = "";
                    document.getElementById('summit-location').value = "";
                    document.getElementById('summit-description').value = "";
                    document.getElementById('summit-image').value = "";
                }

                async function loadSummits() {
                    try {
                        const response = await fetch("/api/summits");
                        const summits = await response.json();
                
                        const tableBody = document.querySelector("#summits-tab #summit-table-body");
                        tableBody.innerHTML = "";
                
                        if (!summits.length) {
                            tableBody.innerHTML = "<tr><td colspan='6' style='text-align:center'>No summits found.</td></tr>";
                            return;
                        }
                
                        summits.forEach(summit => {
                            const row = document.createElement("tr");
                            row.innerHTML = `
                                <td>${summit._id}</td>
                                <td>${summit.title}</td>
                                <td>${summit.year}</td>
                                <td>${summit.date}</td>
                                <td>${summit.location}</td>
                                <td>
                                    <div class="table-actions">
                                        <button class="action-btn edit" onclick="editSummit('${summit._id}')">✏️</button>
                                        <button class="action-btn delete" onclick="deleteSummit('${summit._id}')">🗑️</button>
                                    </div>
                                </td>
                            `;
                            tableBody.appendChild(row);
                        });
                
                    } catch (err) {
                        console.error("Failed to load summits:", err);
                    }
                }
                
                // Dummy Edit/Delete Functions (Optional)
                function editSummit(id) {
                    alert("Edit functionality coming soon for summit ID: " + id);
                }
                
                function deleteSummit(id) {
                    if (confirm("Are you sure you want to delete this summit?")) {
                        alert("Delete functionality coming soon for summit ID: " + id);
                    }
                }

            </script>
</body>

</html>